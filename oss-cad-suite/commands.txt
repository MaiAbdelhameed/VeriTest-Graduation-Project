read_verilog {input_file}

hierarchy -check -top {top_module}

proc; opt; fsm; opt; memory; opt

techmap; opt

flatten

abc -liberty {liberty_file}

clean -purge

write_verilog -attr2comment {output_file}